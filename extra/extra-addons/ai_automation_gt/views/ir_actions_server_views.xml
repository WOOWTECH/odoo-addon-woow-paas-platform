<odoo>
    <record id="ir_actions_server_view_form_ai_automation" model="ir.ui.view">
        <field name="name">ir.actions.server.view.form.ai_automation</field>
        <field name="model">ir.actions.server</field>
        <field name="inherit_id" ref="base.view_server_action_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='action_wrapper']" position="after">
                <div class="alert alert-info" role="alert" invisible="state != 'ai_action'">
                    <ul>
                        <li>Select an AI Assistant that will execute this action.</li>
                        <li>Enter a prompt describing what you want the AI to do.</li>
                        <li>You can tag a model or a record in the prompt using <code>$model</code> or <code>$model/id</code>
                            syntax (e.g., <code>$crm.lead</code> or <code>$crm.lead/123</code>).</li>
                    </ul>
                </div>
                <group invisible="state != 'ai_action'">
                    <field name="ai_assistant_id"
                           required="state == 'ai_action'"
                           options="{'no_create': True}"/>
                    <field name="ai_run_with_sudo"
                           invisible="state != 'ai_action'"/>
                    <field name="ai_prompt"
                           required="state == 'ai_action'"
                           placeholder="Enter your prompt here."/>
                </group>
            </xpath>
        </field>
    </record>
</odoo>
