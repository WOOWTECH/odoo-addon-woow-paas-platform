<odoo>
    <record id="rule_ai_partner_user" model="ir.rule">
        <field name="name">User: AI Partners</field>
        <field name="model_id" ref="base.model_res_partner"/>
        <field name="groups" eval="[(4, ref('base.group_portal')), (4, ref('base.group_public'))]"/>
        <field name="domain_force">[
            ('is_ai', '=', True),
        ]</field>
        <field name="perm_create" eval="False"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="rule_ai_thread_user" model="ir.rule">
        <field name="name">User: Own AI Threads</field>
        <field name="model_id" ref="model_ai_thread"/>
        <field name="groups" eval="[(4, ref('base.group_user')), (4, ref('base.group_portal')), (4, ref('base.group_public'))]"/>
        <field name="domain_force">[
            '|',
            ('create_uid', '=', user.id),
            ('message_ids.author_id', '=', user.partner_id.id),
        ]</field>
    </record>

    <record id="rule_ai_message_user" model="ir.rule">
        <field name="name">User: AI Messages in Participated Threads</field>
        <field name="model_id" ref="model_ai_message"/>
        <field name="groups" eval="[(4, ref('base.group_user')), (4, ref('base.group_portal')), (4, ref('base.group_public'))]"/>
        <field name="domain_force">[
            '|',
            ('thread_id.create_uid', '=', user.id),
            ('thread_id.message_ids.author_id', '=', user.partner_id.id),
        ]</field>
    </record>

    <record id="rule_ai_message_record_user" model="ir.rule">
        <field name="name">User: AI Message Records in Participated Threads</field>
        <field name="model_id" ref="model_ai_message_record"/>
        <field name="groups" eval="[(4, ref('base.group_user')), (4, ref('base.group_portal')), (4, ref('base.group_public'))]"/>
        <field name="domain_force">[
            '|',
            ('thread_id.create_uid', '=', user.id),
            ('thread_id.message_ids.author_id', '=', user.partner_id.id),
        ]</field>
    </record>

    <record id="rule_ai_message_attachment_user" model="ir.rule">
        <field name="name">User: AI Message Attachments in Participated Threads</field>
        <field name="model_id" ref="model_ai_message_attachment"/>
        <field name="groups" eval="[(4, ref('base.group_user')), (4, ref('base.group_portal')), (4, ref('base.group_public'))]"/>
        <field name="domain_force">[
            '|',
            ('thread_id.create_uid', '=', user.id),
            ('thread_id.message_ids.author_id', '=', user.partner_id.id),
        ]</field>
    </record>

    <record id="rule_ai_assistant_user" model="ir.rule">
        <field name="name">User: Own AI Assistants</field>
        <field name="model_id" ref="model_ai_assistant"/>
        <field name="groups" eval="[(4, ref('base.group_user')), (4, ref('base.group_portal')), (4, ref('base.group_public'))]"/>
        <field name="domain_force">[
            '|',
            ('group_ids', '=', False),
            ('group_ids', 'in', user.groups_id.ids),
        ]</field>
    </record>

    <record id="rule_ai_thread_admin" model="ir.rule">
        <field name="name">Admin: Full Access to AI Threads</field>
        <field name="model_id" ref="model_ai_thread"/>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="rule_ai_message_admin" model="ir.rule">
        <field name="name">Admin: Full Access to AI Messages</field>
        <field name="model_id" ref="model_ai_message"/>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="rule_ai_message_record_admin" model="ir.rule">
        <field name="name">Admin: Full Access to AI Message Records</field>
        <field name="model_id" ref="model_ai_message_record"/>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="rule_ai_message_attachment_admin" model="ir.rule">
        <field name="name">Admin: Full Access to AI Message Attachments</field>
        <field name="model_id" ref="model_ai_message_attachment"/>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="rule_ai_assistant_admin" model="ir.rule">
        <field name="name">Admin: Full Access to AI Assistants</field>
        <field name="model_id" ref="model_ai_assistant"/>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <record id="group_ai_advanced_setup_permissions" model="res.groups">
        <field name="name">AI: Advanced Setup</field>
        <field name="category_id" ref="base.module_category_hidden"/>
    </record>
</odoo>
