<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="ai_mail_gt.ask_ai">
        <Dropdown t-if="activeId &amp;&amp; state.assistants.length > 0" state="dropdownState">
            <button class="btn btn-sm btn-outline-primary" name="ask_ai" title="Ask AI">
                Ask AI
            </button>
            <t t-set-slot="content">
                <div class="container ask-ai-container">
                    <div class="d-flex align-items-center">
                        <span class="me-2">Choose an assistant</span>
                        <div class="flex-grow-1">
                            <select class="form-select form-select-sm" t-model="state.assistant"
                                t-on-change="onChangeAssistant">
                                <t t-foreach="state.assistants" t-as="assistant" t-key="assistant.id">
                                    <option t-esc="assistant.name" t-att-value="assistant.id"
                                        t-att-selected="state.assistant.id === assistant.id"/>
                                </t>
                            </select>
                        </div>
                    </div>
                    <div class="mt-2">
                        <textarea class="form-control ai-textarea" placeholder="Ask anything..."
                            t-on-input="onInputMessage" t-on-keydown="onKeyDownMessage"/>
                    </div>
                    <div class="mt-2 d-flex align-items-center gap-2">
                        <button class="btn btn-primary" type="button" t-on-click="onSendMessage"
                            t-att-disabled="!state.message">Send</button>
                        <small class="text-muted">or Ctrl+Enter to send</small>
                    </div>
                </div>
            </t>
        </Dropdown>
    </t>
</templates>
