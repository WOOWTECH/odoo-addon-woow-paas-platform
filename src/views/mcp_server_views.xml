<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- MCP Server Form View -->
    <record id="view_mcp_server_form" model="ir.ui.view">
        <field name="name">woow_paas_platform.mcp_server.form</field>
        <field name="model">woow_paas_platform.mcp_server</field>
        <field name="arch" type="xml">
            <form string="MCP Server">
                <header>
                    <button name="action_sync_tools"
                            type="object"
                            string="Sync Tools"
                            class="btn-primary"
                            icon="fa-refresh"/>
                    <button name="action_test_connection"
                            type="object"
                            string="Test Connection"
                            class="btn-secondary"
                            icon="fa-plug"/>
                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,connected"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="MCP Server Name"/>
                        </h1>
                    </div>
                    <group>
                        <group string="Connection">
                            <field name="url" placeholder="https://mcp.example.com/sse"/>
                            <field name="transport"/>
                            <field name="api_key" password="True"/>
                            <field name="headers_json" placeholder='{"X-Custom": "value"}'/>
                        </group>
                        <group string="Configuration">
                            <field name="scope"/>
                            <field name="cloud_service_id"
                                   invisible="scope != 'user'"/>
                            <field name="active"/>
                            <field name="description"/>
                        </group>
                    </group>
                    <group string="Status" invisible="state == 'draft'">
                        <field name="last_sync"/>
                        <field name="tool_count"/>
                        <field name="state_message" invisible="not state_message"/>
                    </group>
                    <notebook>
                        <page string="Tools" name="tools">
                            <field name="tool_ids">
                                <list>
                                    <field name="name"/>
                                    <field name="description"/>
                                    <field name="active"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- MCP Server List View -->
    <record id="view_mcp_server_list" model="ir.ui.view">
        <field name="name">woow_paas_platform.mcp_server.list</field>
        <field name="model">woow_paas_platform.mcp_server</field>
        <field name="arch" type="xml">
            <list string="MCP Servers">
                <field name="name"/>
                <field name="url"/>
                <field name="transport"/>
                <field name="scope"/>
                <field name="state" widget="badge"
                       decoration-success="state == 'connected'"
                       decoration-danger="state == 'error'"
                       decoration-muted="state == 'draft'"/>
                <field name="tool_count"/>
                <field name="last_sync"/>
                <field name="active" column_invisible="True"/>
            </list>
        </field>
    </record>

    <!-- MCP Server Action -->
    <record id="action_mcp_server" model="ir.actions.act_window">
        <field name="name">MCP Servers</field>
        <field name="res_model">woow_paas_platform.mcp_server</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('scope', '=', 'system')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add your first MCP Server
            </p>
            <p>
                MCP Servers provide external tools that AI Assistants can use during conversations.
            </p>
        </field>
    </record>

    <!-- Menu under Woow PaaS -->
    <menuitem
        id="menu_mcp_servers"
        name="MCP Servers"
        parent="menu_woow_paas_platform_root"
        action="action_mcp_server"
        sequence="50"/>
</odoo>
