---
name: Add ai_base_gt dependency + extend ai.config + create initial data
status: open
created: 2026-02-21T16:13:06Z
updated: 2026-02-20T16:21:24Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/73
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Add ai_base_gt dependency + extend ai.config + create initial data

## Description

建立 ai_base_gt 整合的基礎設施。更新 `__manifest__.py` 加入 `ai_base_gt` 依賴，建立 `ai_config.py` 繼承 `ai.config` 新增 `api_base_url` 欄位，以及建立初始資料 XML（預設的 `ai.config`、`ai.context`、`ai.assistant` 記錄）。

## Acceptance Criteria

- [ ] `__manifest__.py` 的 `depends` 包含 `ai_base_gt`
- [ ] `src/models/ai_config.py` 存在，繼承 `ai.config` 並新增 `api_base_url` 欄位
- [ ] `src/models/__init__.py` 包含 `ai_config` import
- [ ] `src/data/ai_assistant_data.xml` 包含預設的 `ai.config`、`ai.context`（含 WoowBot system prompt）、`ai.assistant`（名稱 WoowBot）記錄
- [ ] `__manifest__.py` 的 `data` 列表包含新的 data XML
- [ ] 模組可成功安裝（`-u woow_paas_platform`）不報錯

## Technical Details

**新增檔案：**
- `src/models/ai_config.py`:
  ```python
  class AIConfig(models.Model):
      _inherit = 'ai.config'
      api_base_url = fields.Char(string='API Base URL')
  ```
- `src/data/ai_assistant_data.xml`:
  - `ai.config` record: type=chatgpt, name=Default Config（noupdate=0 讓管理員可更新）
  - `ai.context` record: 包含原本 `ai_agents.xml` 中 WoowBot 的 system_prompt
  - `ai.assistant` record: name=WoowBot, config_id 指向上面的 config, context_id 指向上面的 context

**修改檔案：**
- `src/__manifest__.py`: depends 加入 `ai_base_gt`，data 加入新 XML
- `src/models/__init__.py`: 加入 `from . import ai_config`

**注意：** 此階段舊模型（ai_provider、ai_agent）仍保留，兩套並存。

## Dependencies

- [ ] `ai_base_gt` 模組已在 `extra-addons` 中可用

## Effort Estimate

- Size: S
- Parallel: false（後續 task 依賴此 task）
