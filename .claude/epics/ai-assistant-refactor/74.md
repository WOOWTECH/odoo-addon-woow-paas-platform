---
name: Remove old models + frontend adaptation + cleanup
status: open
created: 2026-02-21T16:13:06Z
updated: 2026-02-20T16:21:24Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/74
depends_on: [78, 72, 75]
parallel: false
conflicts_with: []
---

# Task: Remove old models + frontend adaptation + cleanup

## Description

移除舊的 `ai_provider` 和 `ai_agent` 模型及其相關檔案（views、data、ACL），更新前端 `ai_service.js` 適配新的 API response 格式，確保模組乾淨無殘留引用。

## Acceptance Criteria

- [ ] `src/models/ai_provider.py` 已刪除
- [ ] `src/models/ai_agent.py` 已刪除
- [ ] `src/views/ai_provider_views.xml` 已刪除
- [ ] `src/views/ai_agent_views.xml` 已刪除
- [ ] `src/data/ai_agents.xml` 已刪除
- [ ] `src/models/__init__.py` 移除 `ai_provider` 和 `ai_agent` import
- [ ] `src/__manifest__.py` 的 data 列表移除舊 views/data XML
- [ ] `src/security/ir.model.access.csv` 移除 `ai_provider` 和 `ai_agent` 的 ACL（4 行）
- [ ] `ai_service.js` 適配新 API response 欄位名稱（如有變更）
- [ ] 全域搜尋確認無殘留的 `woow_paas_platform.ai_provider` 和 `woow_paas_platform.ai_agent` 引用
- [ ] 模組可成功安裝（`-u woow_paas_platform`）不報錯

## Technical Details

**刪除檔案：**
- `src/models/ai_provider.py`
- `src/models/ai_agent.py`
- `src/views/ai_provider_views.xml`
- `src/views/ai_agent_views.xml`
- `src/data/ai_agents.xml`

**修改檔案：**
- `src/models/__init__.py`: 移除 `from . import ai_provider` 和 `from . import ai_agent`
- `src/__manifest__.py`: data 列表移除 `views/ai_provider_views.xml`、`views/ai_agent_views.xml`、`data/ai_agents.xml`
- `src/security/ir.model.access.csv`: 移除 4 行（ai_provider user/admin, ai_agent user/admin）
- `src/views/menu.xml`: 移除 ai_provider/ai_agent 相關 menu items（如有）

**前端適配：**
- `src/static/src/paas/services/ai_service.js`: 檢查 API response 欄位名稱是否有變更（Task 72 中的 endpoint 變更），做對應調整

**驗證搜尋：**
```bash
grep -r "ai_provider\|ai_agent" src/ --include="*.py" --include="*.xml" --include="*.js" --include="*.csv"
```
確保無殘留引用（排除 `ai_config.py` 和 `ai_client.py` 中的合法引用）。

## Dependencies

- [ ] Task 78 完成（settings 已不再引用 ai_provider）
- [ ] Task 72 完成（controller 已不再引用 ai_agent/ai_provider）
- [ ] Task 75 完成（discuss_channel 已不再引用 ai_agent）

## Effort Estimate

- Size: M
- Parallel: false（需等 Task 3-5 全部完成）
