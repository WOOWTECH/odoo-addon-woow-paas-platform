---
name: Verify dot-path key compatibility in Config Restriction framework
status: open
created: 2026-02-15T10:59:32Z
updated: 2026-02-15T14:02:20Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/66
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Verify dot-path key compatibility in Config Restriction framework

## Description
驗證 dot-path key（如 `main.secret.N8N_BASIC_AUTH_USER`）在 Config Restriction 框架中的行為是否正確。n8n Helm chart 使用 `main.config.*` 和 `main.secret.*` 結構，這些 dot-path key 需要在前後端都能正確處理。

## Acceptance Criteria
- [ ] `HelmValueForm` 能從 `service.helm_values` 中正確讀取 dot-path key 的值
- [ ] `HelmValueForm` 提交時保持 dot-path key 格式
- [ ] `_filter_allowed_helm_values` 正確辨識並比對 dot-path key
- [ ] Dot-path key 作為頂層 key（shallow merge）能被 Helm chart 正確解析
- [ ] 如不相容，記錄問題並提出替代方案

## Technical Details
- 檢查 `HelmValueForm` 元件（`src/static/src/paas/components/config/`）如何處理 key 讀取和寫入
- 檢查 `_filter_allowed_helm_values`（`src/controllers/paas.py:969`）的比對邏輯
- 檢查 `_parse_helm_value_specs`（`src/controllers/paas.py:952`）的解析邏輯
- 驗證 Odoo template 現有 `config.database.type` key 已正常運作（這本身就是 dot-path key）

## Dependencies
- [ ] Config Restriction 框架已完成（PR #64）— ✅ 已存在

## Effort Estimate
- Size: S
- Hours: 1-2
- Parallel: false（此為後續 task 的前提）

## Definition of Done
- [ ] 驗證結果記錄完成
- [ ] 確認 dot-path key 相容（或提出替代方案）
- [ ] 無需程式碼變更（僅驗證）
