---
name: Add MCP configuration fields to CloudAppTemplate
status: open
created: 2026-02-27T14:18:57Z
updated: 2026-02-27T14:31:13Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/106
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Add MCP configuration fields to CloudAppTemplate

## Description
在 CloudAppTemplate model 新增通用的 MCP sidecar 聲明式欄位，讓模板可以配置是否啟用 MCP sidecar、image、port、transport 等。同時在模板 form view 中加入 MCP 設定區塊。

## Acceptance Criteria
- [ ] CloudAppTemplate 新增以下欄位：
  - `mcp_enabled` (Boolean, default=False)
  - `mcp_sidecar_image` (Char)
  - `mcp_sidecar_port` (Integer, default=3001)
  - `mcp_transport` (Selection: sse/streamable_http, default=streamable_http)
  - `mcp_endpoint_path` (Char, default=/mcp)
  - `mcp_sidecar_env` (Text, JSON format)
- [ ] 模板 form view 新增 "MCP Sidecar" tab 或 group
- [ ] McpServer model 新增 `auto_created` (Boolean, readonly, default=False)
- [ ] MCP Server form view 顯示 auto_created 標記（badge 或 readonly 提示）
- [ ] 欄位有 help text 說明用途

## Technical Details
- 修改 `src/models/cloud_app_template.py` 新增欄位
- 修改 `src/views/cloud_app_template_views.xml` 新增 UI
- 修改 `src/models/mcp_server.py` 新增 `auto_created` 欄位
- 修改 `src/views/mcp_server_views.xml` 顯示標記
- `mcp_sidecar_env` 使用 JSON 格式，範例：`{"MCP_MODE": "http", "CUSTOM_VAR": "value"}`
- `mcp_transport` 使用與 mcp_server 相同的 Selection 值

## Dependencies
- [ ] 無前置依賴（與 Task 001 可並行）

## Effort Estimate
- Size: S
- Hours: 3
- Parallel: true

## Definition of Done
- [ ] 欄位已新增並可在 form view 操作
- [ ] Module upgrade 不報錯
- [ ] auto_created MCP Server 有明確視覺標記
