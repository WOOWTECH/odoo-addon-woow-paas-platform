---
name: Dashboard Integration
status: open
created: 2026-02-01T17:23:19Z
updated: 2026-02-01T17:39:37Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/12
depends_on: [7]
parallel: true
conflicts_with: [8, 9, 10, 11]
---

# Task: Dashboard Integration

## Description

將服務卡片整合到 Workspace Detail Page，並建立首次部署引導畫面。

## Acceptance Criteria

- [ ] ServiceCard 元件建立
- [ ] WorkspaceDetailPage 顯示服務列表
- [ ] 首次部署引導畫面（無服務時）
- [ ] 「+ Add Service」按鈕
- [ ] 服務狀態即時更新

## Technical Details

### ServiceCard (`src/static/src/paas/components/service/`)

```
components/service/
├── ServiceCard.js
├── ServiceCard.xml
└── ServiceCard.scss
```

**顯示內容:**
- App icon
- Service name
- Status badge
- URL (clickable)
- Quick actions: Open, Settings

**Props:**
```javascript
static props = {
    service: Object,
    onOpen: Function,
    onSettings: Function,
};
```

### WorkspaceDetailPage 修改

在現有 WorkspaceDetailPage 加入 Services section：

```xml
<!-- Services Section -->
<div class="o_woow_services_section">
    <div class="section-header">
        <h2>Cloud Services</h2>
        <WoowButton label="'+ Add Service'" onClick="goToMarketplace"/>
    </div>

    <!-- Empty State (no services) -->
    <t t-if="services.length === 0">
        <div class="o_woow_empty_services">
            <WoowIcon name="'cloud_upload'"/>
            <h3>Get Started: Deploy Your First Service</h3>
            <p>Launch containerized applications with one click</p>
            <WoowButton label="'Browse Marketplace'" variant="'primary'" onClick="goToMarketplace"/>
        </div>
    </t>

    <!-- Service Cards -->
    <t t-else="">
        <div class="o_woow_service_grid">
            <t t-foreach="services" t-as="service" t-key="service.id">
                <ServiceCard service="service" onOpen="openService" onSettings="goToSettings"/>
            </t>
        </div>
    </t>
</div>
```

### 資料載入

擴展 WorkspaceDetailPage 的資料載入：

```javascript
async loadData() {
    const workspaceId = this.props.workspaceId;
    const [workspace, services] = await Promise.all([
        workspaceService.getWorkspace(workspaceId),
        cloudService.getServices(workspaceId),
    ]);
    this.state.workspace = workspace;
    this.state.services = services;
}
```

### 狀態輪詢

當有 deploying/upgrading 狀態的服務時，啟動輪詢：

```javascript
startPolling() {
    this.pollingInterval = setInterval(async () => {
        const services = await cloudService.getServices(this.props.workspaceId);
        this.state.services = services;

        // Stop polling if no pending services
        const hasPending = services.some(s => ['deploying', 'upgrading', 'deleting'].includes(s.state));
        if (!hasPending) {
            this.stopPolling();
        }
    }, 5000);
}
```

### SCSS Styles

```scss
.o_woow_services_section {
    margin-top: 2rem;

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
}

.o_woow_empty_services {
    text-align: center;
    padding: 3rem;
    background: var(--woow-surface);
    border-radius: var(--woow-radius-lg);
}

.o_woow_service_grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
}
```

## Dependencies

- [ ] Task 003: API 可用

## Effort Estimate

- Size: S
- Hours: 4-6
- Parallel: true

## Definition of Done

- [ ] ServiceCard 正確顯示服務資訊
- [ ] 點擊 ServiceCard 導航到 Detail 頁面
- [ ] 空狀態引導畫面正確顯示
- [ ] 「+ Add Service」導航到 Marketplace
- [ ] 狀態輪詢正常運作
- [ ] 響應式 grid layout
