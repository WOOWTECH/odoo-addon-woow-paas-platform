---
name: Add per-column quick-create with defaultStageId
status: open
created: 2026-02-10T15:53:50Z
updated: 2026-02-10T15:57:34Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/55
depends_on: [54]
parallel: false
conflicts_with: [54]
---

# Task: Add per-column quick-create with defaultStageId

## Description

Add a "+" button to each kanban column header that opens CreateTaskModal with the column's stage pre-selected. Extend CreateTaskModal to accept an optional `defaultStageId` prop and include `stage_id` in the create request.

## Acceptance Criteria

- [ ] Each kanban column header shows a "+" button
- [ ] Clicking the column "+" opens CreateTaskModal with that column's stage as default
- [ ] CreateTaskModal sends `stage_id` in the create payload when `defaultStageId` is provided
- [ ] Backend `_create_task()` respects the `stage_id` parameter
- [ ] New task appears in the correct column after creation

## Technical Details

**Files to modify**:

1. **`src/static/src/paas/components/modal/CreateTaskModal.js`**:
   - Add optional prop: `defaultStageId: { type: Number, optional: true }`
   - In `onSubmit()`, add `stage_id` to data if `this.props.defaultStageId` is set:
     ```javascript
     if (this.props.defaultStageId) {
         data.stage_id = this.props.defaultStageId;
     }
     ```

2. **`src/static/src/paas/pages/project-kanban/ProjectKanbanPage.js`**:
   - Add `defaultStageId` to state: `defaultStageId: null`
   - Modify `openCreateModal` to accept stageId parameter:
     ```javascript
     openCreateModal(stageId = null) {
         this.state.showCreateModal = true;
         this.state.defaultStageId = stageId;
     }
     ```

3. **`src/static/src/paas/pages/project-kanban/ProjectKanbanPage.xml`**:
   - Add "+" button in each column header (inside `o_woow_kanban__column_header`):
     ```xml
     <button class="o_woow_kanban__column_add_btn"
             t-on-click="() => this.openCreateModal(column.stage.id)">
         <WoowIcon name="'add'" size="16"/>
     </button>
     ```
   - Pass `defaultStageId` to modal:
     ```xml
     <CreateTaskModal t-if="state.showCreateModal"
         defaultProjectId="props.projectId"
         defaultStageId="state.defaultStageId"
         onClose.bind="closeCreateModal"
         onCreated.bind="onTaskCreated"/>
     ```

4. **`src/controllers/ai_assistant.py`** â€” `_create_task()`:
   - Ensure `stage_id` from kwargs is respected when creating the task
   - If `stage_id` is provided, set it on the new task record

## Dependencies

- [ ] Task 002 (CreateTaskModal integration must be in place)

## Effort Estimate

- Size: S
- Hours: 0.5
- Parallel: false (builds on Task 002 changes)

## Definition of Done

- [ ] Code implemented
- [ ] Column "+" buttons work correctly
- [ ] CreateTaskModal sends stage_id when provided
- [ ] Backend respects stage_id on task creation
- [ ] New task appears in correct kanban column
