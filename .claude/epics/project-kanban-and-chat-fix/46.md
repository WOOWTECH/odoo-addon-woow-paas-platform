---
name: 前端 — 路由接線與導航修改
status: open
created: 2026-02-10T09:14:49Z
updated: 2026-02-10T11:16:05Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/46
depends_on: [41]
parallel: false
conflicts_with: []
---

# Task：前端 — 路由接線與導航修改

## 描述

將新建的 `ProjectKanbanPage` 接入路由系統，修改專案列表頁的導航目標，並在 `__manifest__.py` 中註冊新資源檔。

## 驗收標準

- [ ] 新路由 `ai-assistant/projects/:id` 正確匹配並渲染 `ProjectKanbanPage`
- [ ] `router.params.id` 正確解析為 `projectId`
- [ ] `SupportProjectsPage.navigateToProject()` 導航至 `#/ai-assistant/projects/{id}`（而非 `#/ai-assistant/tasks?project={id}`）
- [ ] `ProjectKanbanPage` 的新 JS、XML、SCSS 檔案在 `__manifest__.py` 中正確註冊
- [ ] 從看板點擊任務後，瀏覽器返回按鈕能回到看板頁面
- [ ] `Root` 元件正確匯入並切換至 `ProjectKanbanPage`

## 技術細節

### 修改檔案

**`src/static/src/paas/core/router.js`**：
新增路由（放在 `ai-assistant/tasks/:taskId` 之前以確保匹配優先順序）：
```javascript
{
    path: "ai-assistant/projects/:id",
    name: "Project Kanban",
    routeName: "ai-project-kanban",
    pattern: /^ai-assistant\/projects\/(\d+)$/
},
```

`parseRoute()` 中新增 param 映射：
```javascript
if (route.routeName === 'ai-project-kanban') {
    this.params.id = match[1];
}
```

**`src/static/src/paas/pages/support-projects/SupportProjectsPage.js`**：
```javascript
// 修改第 136-138 行
navigateToProject(projectId) {
    this.router.navigate("ai-assistant/projects/" + projectId);
}
```

**`src/static/src/paas/root.js`**：
- 匯入 `ProjectKanbanPage`
- 在 `static components` 中註冊
- 在模板中新增 `t-elif` 條件渲染

**`src/__manifest__.py`**：
在 `woow_paas_platform.assets_paas` bundle 中新增：
```python
'woow_paas_platform/static/src/paas/pages/project-kanban/ProjectKanbanPage.js',
'woow_paas_platform/static/src/paas/pages/project-kanban/ProjectKanbanPage.xml',
'woow_paas_platform/static/src/paas/styles/pages/_project_kanban.scss',
```

### 注意事項
- 路由需放在 `ai-assistant/projects`（精確匹配）之前，以確保 pattern 路由先被匹配
- `root.js` 和對應的 `root.xml` 都需要更新以加入新頁面的條件渲染

## 依賴項

- [ ] 任務 41 完成（`ProjectKanbanPage` 元件需先存在）

## 工作量估計

- 大小：S
- 時數：1-2 小時
- 可平行：否（依賴任務 41）

## 完成定義

- [ ] 路由正確匹配 `#/ai-assistant/projects/123`
- [ ] 點擊專案卡片導航至看板頁面
- [ ] manifest 註冊完成，頁面正常載入
- [ ] 瀏覽器返回/前進正常運作
