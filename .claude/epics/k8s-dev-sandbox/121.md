---
name: Helm Chart 基礎結構
status: open
created: 2026-02-28T09:46:14Z
updated: 2026-02-28T09:54:37Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/121
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Helm Chart 基礎結構

## Description

建立 `charts/odoo-dev-sandbox/` Helm Chart 的基礎骨架，包含 Chart 元資料、預設值配置、模板 helper 函數，以及基礎資源（namespace、secrets）。此為所有後續 task 的基底。

## Acceptance Criteria

- [ ] `charts/odoo-dev-sandbox/Chart.yaml` 包含正確的 chart 元資料（apiVersion: v2, version: 0.1.0）
- [ ] `charts/odoo-dev-sandbox/values.yaml` 包含所有可配置參數（sandbox, odoo, postgres, nginx, pgadmin sections）
- [ ] `charts/odoo-dev-sandbox/values-local.yaml` 提供 K3s 本地開發覆蓋值
- [ ] `charts/odoo-dev-sandbox/templates/_helpers.tpl` 提供命名、標籤、selector 等 helper 函數
- [ ] `charts/odoo-dev-sandbox/templates/namespace.yaml` 建立帶有 TTL annotation 的 namespace
- [ ] `charts/odoo-dev-sandbox/templates/secrets.yaml` 管理 PostgreSQL 密碼和 Odoo admin 密碼
- [ ] `helm lint charts/odoo-dev-sandbox` 通過驗證

## Technical Details

- 參考 `extra/paas-operator/helm/` 的 Helm 模式（_helpers.tpl 命名慣例、label 結構）
- values.yaml 需包含 `sandbox.mode`（local/ci）、`sandbox.ttl`、`sandbox.branch` 等頂層配置
- namespace 命名格式：`dev-sandbox-{{ .Values.sandbox.branch }}`
- Secret 使用 `data` + base64 編碼，並支援 `existingSecret` 覆蓋

## Dependencies

- [ ] 無前置依賴

## Effort Estimate

- Size: M
- Hours: 4-6
- Parallel: false（後續所有 task 依賴此項）

## Definition of Done

- [ ] Chart 結構建立完成
- [ ] `helm lint` 通過
- [ ] `helm template` 可正確渲染所有基礎模板
- [ ] values.yaml 有清晰的註解說明每個參數
