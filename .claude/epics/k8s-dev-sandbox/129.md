---
name: 列表/狀態/日誌腳本
status: open
created: 2026-02-28T09:46:14Z
updated: 2026-02-28T09:54:37Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/129
depends_on: [004]
parallel: true
conflicts_with: []
---

# Task: 列表/狀態/日誌腳本

## Description

建立 `k8s-sandbox-list.sh`、`k8s-sandbox-status.sh`、`k8s-sandbox-logs.sh` 三個輔助腳本，用於查看活躍沙盒、檢查單一沙盒狀態、取得服務日誌。

## Acceptance Criteria

- [ ] `k8s-sandbox-list.sh` 列出所有 `dev-sandbox-*` namespace 及關鍵資訊（branch、TTL、建立時間、URL）
- [ ] `k8s-sandbox-status.sh <name>` 顯示指定沙盒的詳細狀態（Pod status、resource usage、TTL 剩餘時間）
- [ ] `k8s-sandbox-logs.sh <name>` 顯示 Odoo Pod 的日誌（預設）
- [ ] Logs 支援 `--service` 參數切換到 postgres/nginx 日誌
- [ ] Logs 支援 `--follow` 即時追蹤

## Technical Details

**List 輸出格式**:
```
NAME                          BRANCH                    AGE    TTL      STATUS
dev-sandbox-epic-cloud-svc    epic/cloud-services       2d     5d       Running
dev-sandbox-fix-login         fix/login-bug             4h     6d20h    Running
```

**Status 資訊來源**:
- namespace annotations → branch, ttl, created, expires
- `kubectl get pods -n $NS` → Pod 狀態
- `kubectl top pods -n $NS` → 資源用量（如果 metrics-server 可用）

**Logs**:
- `kubectl logs -n $NS deploy/odoo` (default)
- `kubectl logs -n $NS deploy/nginx` (--service nginx)
- `kubectl logs -n $NS statefulset/postgres` (--service postgres)

## Dependencies

- [ ] Task 004（create 腳本，需要已建立的沙盒來測試）

## Effort Estimate

- Size: S
- Hours: 3-4
- Parallel: true（可與 Task 006, 007 並行）

## Definition of Done

- [ ] 三個腳本可正確執行
- [ ] List 輸出格式清楚可讀
- [ ] 錯誤處理：沙盒不存在時給出明確提示
