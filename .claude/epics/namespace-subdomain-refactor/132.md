---
name: Create naming utility module
status: open
created: 2026-03-01T14:57:06Z
updated: 2026-03-01T15:02:28Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/132
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Create naming utility module

## Description

建立 `src/services/naming.py` 共用模組，提供所有 PaaS 資源的 hash-based 命名函式。這是基礎任務，後續所有重構都依賴此模組。

## Acceptance Criteria

- [ ] `src/services/naming.py` 包含以下函式：
  - `generate_ws_hash(slug)` → 8 字元 hex
  - `generate_resource_hash(reference_id, name)` → 8 字元 hex
  - `make_namespace(slug)` → `paas-ws-{ws_hash}`
  - `make_service_subdomain(slug, reference_id, name)` → `paas-cs-{ws_hash}-{svc_hash}`
  - `make_smarthome_subdomain(slug, reference_id, name)` → `paas-sm-{ws_hash}-{sm_hash}`
- [ ] `src/services/__init__.py` 已 import naming
- [ ] 函式產生的結果符合 K8s 命名規範（lowercase, alphanumeric + hyphen, ≤63 chars）
- [ ] 同一組輸入永遠產生相同輸出（deterministic）

## Technical Details

- 使用 `hashlib.md5` 產生 hex digest 的前 8 字元
- `generate_ws_hash` 以 `workspace.slug` 為輸入
- `generate_resource_hash` 以 `reference_id + name` 為 salted 輸入（沿用現有 cloud service 模式）
- 所有 `make_*` 函式組合 prefix + hash 產生完整名稱

**Files affected:**
- `src/services/naming.py` (new)
- `src/services/__init__.py` (edit)

## Dependencies

- None

## Effort Estimate

- Size: S
- Hours: 0.5
- Parallel: false (blocks all other tasks)

## Definition of Done

- [ ] Code implemented
- [ ] Hash output is deterministic and correct
- [ ] Module importable from controllers/models
