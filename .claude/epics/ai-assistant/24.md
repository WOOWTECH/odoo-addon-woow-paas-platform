---
name: Extend project.project + project.task
status: open
created: 2026-02-09T16:35:07Z
updated: 2026-02-09T16:35:07Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/24
depends_on: [22]
parallel: true
conflicts_with: [25]
---

# Task: Extend project.project + project.task

## Description
使用 `_inherit` 擴展 Odoo 原生的 `project.project` 和 `project.task` model。project.project 新增 `workspace_id` 欄位連結 workspace。project.task 新增 `chat_enabled`, `channel_id`, `ai_auto_reply` 欄位，實作 `_create_chat_channel()` lazy channel creation 和 `write()` hook。建立任務表單的 Chat tab view。

## Acceptance Criteria
- [ ] `project_project.py` 建立：`_inherit = 'project.project'`，新增 `workspace_id` (Many2one → `woow_paas_platform.workspace`)
- [ ] `project_task.py` 建立：`_inherit = 'project.task'`，新增 `chat_enabled` (Boolean), `channel_id` (Many2one → `discuss.channel`), `ai_auto_reply` (Boolean)
- [ ] `_create_chat_channel()` 方法實作：首次啟用 chat 時 lazy 建立 discuss.channel
- [ ] `write()` override：當 `chat_enabled` 改為 True 時自動呼叫 `_create_chat_channel()`
- [ ] `project_task_views.xml` 建立：擴展任務表單新增 Chat tab
- [ ] `models/__init__.py` 更新 imports
- [ ] `__manifest__.py` 更新 data 清單

## Technical Details
- 參考 `Woow_odoo_task_ai_solver/models/project_task.py:25-56` 的 `_create_chat_channel()` 模式
- Channel 命名格式：`Task Chat: {task.name}`
- Channel 建立時自動加入 task 的 assigned users 為 members
- `ai_auto_reply` 預設 True（自動模式）
- View 使用 `xpath` 擴展原生 `project.task` form view

### Files affected
- `src/models/project_project.py` (create)
- `src/models/project_task.py` (create)
- `src/models/__init__.py` (edit)
- `src/views/project_task_views.xml` (create)
- `src/__manifest__.py` (edit - add views)

## Dependencies
- [ ] Task 001: 需要 `project` 模組依賴已加入 `__manifest__.py`

## Effort Estimate
- Size: M
- Hours: 3-5
- Parallel: true (can run alongside Task 003)

## Definition of Done
- [ ] Code implemented
- [ ] project.project 有 workspace_id 欄位
- [ ] project.task 有 chat_enabled, channel_id, ai_auto_reply 欄位
- [ ] 啟用 chat_enabled 後自動建立 discuss.channel
- [ ] 任務表單顯示 Chat tab
