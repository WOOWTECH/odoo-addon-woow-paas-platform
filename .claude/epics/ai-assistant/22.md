---
name: AI Provider + Agent Models + Settings UI
status: closed
created: 2026-02-09T16:35:07Z
updated: 2026-02-10T06:11:51Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/22
depends_on: []
parallel: false
conflicts_with: []
---

# Task: AI Provider + Agent Models + Settings UI

## Description

建立 AI Provider 和 AI Agent 兩個全新 `_name` model，擴展 `res.config.settings` 新增 AI 設定欄位，建立後台管理 views，新增預設 WoowBot agent 資料，更新 ACL。同時在 `__manifest__.py` 新增 `project`, `mail`, `bus` 模組依賴。

## Acceptance Criteria

- [ ] `__manifest__.py` 的 `depends` 包含 `project`, `mail`, `bus`
- [ ] `woow_paas_platform.ai_provider` model 建立完成（name, api_base_url, api_key, model_name, is_active, max_tokens, temperature）
- [ ] `woow_paas_platform.ai_agent` model 建立完成（name, display_name, system_prompt, provider_id, avatar_color, is_default）
- [ ] `res.config.settings` 擴展新增 AI provider 相關欄位
- [ ] `ai_provider_views.xml` + `ai_agent_views.xml` 後台管理 views 建立
- [ ] `res_config_settings_views.xml` 更新新增 AI Providers 區塊
- [ ] `data/ai_agents.xml` 預設 WoowBot agent 建立
- [ ] `ir.model.access.csv` 新增 ai_provider, ai_agent 的 ACL 規則
- [ ] `models/__init__.py` 新增 imports
- [ ] `__manifest__.py` 的 `data` 清單更新（新增 views + data 檔案）

## Technical Details

- `ai_provider.py`: `_name = 'woow_paas_platform.ai_provider'`, `_description = 'AI Provider'`
- `ai_agent.py`: `_name = 'woow_paas_platform.ai_agent'`, `_description = 'AI Agent'`
- Provider fields 使用 `config_parameter` 讓 active provider 可透過 settings 設定
- API Key 儲存：使用 Odoo 的 `fields.Char`（Odoo 自帶 ir.config_parameter 加密）
- Settings view 參考現有的 PaaS Operator Configuration 區塊格式
- WoowBot 預設 system prompt: 通用助手角色

### Files affected

- `src/__manifest__.py` (edit)
- `src/models/__init__.py` (edit)
- `src/models/ai_provider.py` (create)
- `src/models/ai_agent.py` (create)
- `src/models/res_config_settings.py` (edit)
- `src/views/ai_provider_views.xml` (create)
- `src/views/ai_agent_views.xml` (create)
- `src/views/res_config_settings_views.xml` (edit)
- `src/data/ai_agents.xml` (create)
- `src/security/ir.model.access.csv` (edit)

## Dependencies

- None (first task)

## Effort Estimate

- Size: M
- Hours: 4-6
- Parallel: false (foundation for all other tasks)

## Definition of Done

- [ ] Code implemented
- [ ] Module installs without errors
- [ ] Provider CRUD works in Odoo backend
- [ ] Agent CRUD works in Odoo backend
- [ ] Settings page shows AI Provider section
- [ ] WoowBot default agent loaded via data file
