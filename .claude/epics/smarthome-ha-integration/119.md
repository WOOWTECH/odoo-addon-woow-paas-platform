---
name: OWL UI - Smart Home Components
status: open
created: 2026-02-28T09:46:09Z
updated: 2026-02-28T09:53:44Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/119
depends_on: [115]
parallel: true
conflicts_with: []
---

# Task: OWL UI - Smart Home Components

## Description

在 /woow OWL 前台新增 Smart Home 管理功能。包含：Workspace Detail 頁面整合 Smart Home 區塊、Smart Home 卡片元件、Smart Home Detail 頁面（顯示 Tunnel 完整資訊）、建立 Smart Home 流程 Modal。

## Acceptance Criteria

- [ ] **Workspace Detail 整合**：在 Cloud Services 區塊下方新增 "Smart Home" 區塊
- [ ] **Smart Home 卡片**：顯示名稱、狀態指示燈（green/gray/red）、subdomain link
- [ ] **"+ Add Smart Home" 按鈕**：觸發建立 Modal
- [ ] **CreateSmartHomeModal**：輸入名稱、HA Port（預設 8123）、提交建立
- [ ] **建立進度**：顯示 provisioning 狀態（pending → provisioning → active）
- [ ] **Smart Home Detail 頁面**：路由 `#/workspaces/:id/smarthome/:homeId`
- [ ] **Tunnel 資訊面板**：顯示 Tunnel ID、連接器類型、連接器 ID、路由 URL、狀態、運作時間
- [ ] **狀態指示燈**：connected = 綠色、disconnected = 灰色、error = 紅色
- [ ] **刪除操作**：確認 Modal → 呼叫 API 刪除
- [ ] **連線指引**：建立完成後顯示步驟引導（安裝 HA Component、設定 Woow PaaS URL）
- [ ] **workspace_service.js 擴充**：新增 smart home CRUD + refresh status API methods
- [ ] "Explore More Services" 的 Smart Home 卡片 "Get Started" → 觸發建立流程

## Technical Details

### 元件結構

```
WorkspaceDetailPage (已存在)
├── Cloud Services Section (已存在)
├── Smart Home Section (新增)
│   ├── SmartHomeCard × N
│   └── + Add Smart Home button
└── Explore More Services (已存在，修改 Smart Home 按鈕行為)

SmartHomeDetailPage (新頁面)
├── Header (名稱 + 狀態)
├── Tunnel Info Panel
│   ├── Tunnel ID
│   ├── Connector Type / ID
│   ├── Route URL
│   ├── Status Badge
│   └── Uptime
├── Connection Guide
└── Actions (Delete)

CreateSmartHomeModal
├── Name input
├── Port input (default 8123)
└── Submit / Cancel
```

### 路由新增

```javascript
// root.js
'#/workspaces/:id/smarthome/:homeId': SmartHomeDetailPage
```

### Service 擴充

```javascript
// workspace_service.js
async getSmartHomes(workspaceId) { ... }
async createSmartHome(workspaceId, data) { ... }
async getSmartHome(homeId) { ... }
async deleteSmartHome(homeId) { ... }
async refreshSmartHomeStatus(homeId) { ... }
```

### SCSS

```scss
// 新增 styles/pages/_smart_home.scss
.o_woow_smart_home_card { ... }
.o_woow_smart_home_detail { ... }
.o_woow_tunnel_info { ... }
.o_woow_status_badge {
  &--connected { color: green; }
  &--disconnected { color: gray; }
  &--error { color: red; }
}
```

### 涉及檔案
- `src/static/src/paas/pages/SmartHomeDetailPage.js` - 新檔案
- `src/static/src/paas/pages/SmartHomeDetailPage.xml` - 新檔案
- `src/static/src/paas/components/SmartHomeCard.js` - 新檔案
- `src/static/src/paas/components/SmartHomeCard.xml` - 新檔案
- `src/static/src/paas/components/CreateSmartHomeModal.js` - 新檔案
- `src/static/src/paas/components/CreateSmartHomeModal.xml` - 新檔案
- `src/static/src/paas/pages/WorkspaceDetailPage.js` - 修改，加入 Smart Home section
- `src/static/src/paas/pages/WorkspaceDetailPage.xml` - 修改
- `src/static/src/paas/services/workspace_service.js` - 擴充
- `src/static/src/paas/root.js` - 新增路由
- `src/static/src/paas/styles/pages/_smart_home.scss` - 新檔案
- `src/__manifest__.py` - 註冊新 assets

## Dependencies

- [ ] Task 002 (Smart Home Controller) - 需要 API endpoints

## Effort Estimate

- Size: M
- Hours: 12-16
- Parallel: true（只需 Task 002 完成，可與 Task 003、004 並行）
