---
name: "Frontend: ConfigurationTab read-only mode refactor"
status: closed
created: 2026-02-14T16:16:38Z
updated: 2026-02-14T17:03:47Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/62
depends_on: [001]
parallel: false
conflicts_with: [004]
---

# Task: Frontend — ConfigurationTab read-only mode refactor

## Description

重構 ConfigurationTab 的唯讀顯示模式，從展示所有 helm values 的 flattenedValues 改為只顯示 `helm_value_specs` 定義的欄位，使用 label/value 形式。

## Acceptance Criteria

- [ ] 唯讀模式只顯示 `service.template.helm_value_specs` 中 required + optional 的欄位
- [ ] 每個欄位顯示 spec 的 `label`（非 raw key）和對應的 value
- [ ] Password 類型欄位值顯示為 `********`
- [ ] Boolean 類型顯示為 `Enabled` / `Disabled`
- [ ] 無 spec 或 spec 為空時顯示「No configurable settings」
- [ ] 不顯示 image、resources、postgresql 等系統值

## Technical Details

**檔案**: `ConfigurationTab.js` + `ConfigurationTab.xml`

**JS 修改**：

移除：`flattenedValues`, `formatKey`, `isObject`, `isArray`, `formatValue`

新增：
```javascript
get helmValueSpecs() {
    return this.props.service.template?.helm_value_specs || { required: [], optional: [] };
}

get allSpecs() {
    return [...(this.helmValueSpecs.required || []), ...(this.helmValueSpecs.optional || [])];
}

getSpecValue(spec) {
    const values = this.currentValues;
    const value = values[spec.key];
    if (value !== undefined) return value;
    return spec.default !== undefined ? spec.default : '';
}

formatSpecValue(spec) {
    const value = this.getSpecValue(spec);
    if (spec.type === 'password') return '********';
    if (spec.type === 'boolean') return value ? 'Enabled' : 'Disabled';
    if (value === null || value === undefined) return '-';
    return String(value);
}
```

**XML 修改**（唯讀區塊）：

用 `allSpecs` 取代 `flattenedValues` 的 `t-foreach`，每個項目顯示 `spec.label` + `formatSpecValue(spec)`。

## Dependencies

- [ ] 001 完成（API 需回傳 `helm_value_specs`）

## Effort Estimate

- Size: S
- Hours: 1
- Parallel: false（與 004 修改同一檔案）

## Definition of Done

- [ ] 唯讀模式顯示 spec 定義的欄位
- [ ] Password 欄位遮蔽
- [ ] 無 spec 時顯示 fallback 訊息
