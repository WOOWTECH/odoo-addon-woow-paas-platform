---
name: Frontend UI - CreateProjectModal + Cloud Service detail page
status: closed
created: 2026-02-22T06:48:56Z
updated: 2026-02-22T10:02:11Z
github: https://github.com/WOOWTECH/odoo-addon-woow-paas-platform/issues/84
depends_on: [002]
parallel: false
conflicts_with: []
---

# Task: Frontend UI - CreateProjectModal + Cloud Service detail page

## Description

修改前端 OWL 元件，將 Support Project 的建立流程從 workspace 導向改為 cloud service 導向。包括修改 support_service.js API client、CreateProjectModal、以及在 Cloud Service 詳情頁新增「建立/查看 Support Project」按鈕。

## Acceptance Criteria

- [ ] `support_service.js` 的 API call 改用 `cloud_service_id` 參數
- [ ] `CreateProjectModal` 接收 `cloudServiceId` prop，不再載入 workspace 選擇
- [ ] Cloud Service 詳情區域有「建立 Support Project」按鈕
- [ ] 已有 Project 時，按鈕改為「查看 Support Project」並導航到該 Project
- [ ] Support Projects 列表顯示關聯的 Cloud Service 名稱
- [ ] 建立 Project 後自動關聯到指定的 Cloud Service
- [ ] 移除 workspace 相關的 project 篩選邏輯

## Technical Details

### 修改檔案

1. **`src/static/src/paas/services/support_service.js`**
   - `fetchProjects(workspaceId)` → `fetchProjects(cloudServiceId)` 或 `fetchAllProjects()`
   - `createProject(workspaceId, data)` → `createProject(cloudServiceId, data)`
   - `fetchTasks(workspaceId, filters)` → 調整對應 API 路由
   - URL 路徑改為 `/api/support/cloud-services/<id>/project`

2. **`src/static/src/paas/components/modal/CreateProjectModal.js`**
   - 移除 `_loadWorkspaces()` 方法
   - 新增 `cloudServiceId` prop
   - `onSubmit()` 改為帶 `cloudServiceId` 呼叫 API

3. **`src/static/src/paas/pages/` (Cloud Service 相關頁面)**
   - 在 Cloud Service 卡片或詳情區域新增按鈕
   - 按鈕邏輯：檢查是否已有 project → 顯示「建立」或「查看」
   - 點擊「查看」導航到 `#/support/projects/{project_id}`

4. **`src/static/src/paas/pages/support-projects/SupportProjectsPage.js`**
   - 移除 workspace 篩選
   - 顯示每個 project 關聯的 cloud service 名稱

5. **`src/static/src/paas/components/modal/CreateTaskModal.js`**
   - 移除 `workspace_id` 相關邏輯，改用 `cloud_service_id`

## Dependencies

- [ ] Task 002 完成（API endpoints 到位）

## Effort Estimate

- Size: M
- Hours: 5
- Parallel: false (depends on 002)

## Definition of Done

- [ ] 從 Cloud Service 詳情頁可建立 Support Project
- [ ] 建立後 Project 正確關聯到 Cloud Service
- [ ] 已有 Project 時按鈕顯示「查看」
- [ ] Support Projects 列表顯示 Cloud Service 名稱
- [ ] 所有 OWL 元件無 console error
- [ ] Deploy 到本地 Odoo 驗證
